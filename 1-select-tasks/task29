--phantom read
DROP TABLE IF EXISTS TranIsolLevels;
CREATE TABLE TranIsolLevels (
Id INTEGER PRIMARY KEY NOT NULL,
TestValue INTEGER NOT NULL
);

INSERT INTO TranIsolLevels VALUES(1,1);

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
START TRANSACTION;
SELECT  Id,TestValue
FROM TranIsolLevels
WHERE Id>1;
SELECT pg_sleep(7);
SELECT  Id,TestValue
FROM TranIsolLevels
WHERE id>1;
COMMIT;


BEGIN;
INSERT INTO TRANISOLLEVELS VALUES(2,30);
UPDATE TranIsolLevels
SET TESTVALUE=10
WHERE Id=1;
SELECT pg_sleep(7);
ROLLBACK;