--Problem: dirty read

DROP TABLE IF EXISTS TranIsolLevels;
CREATE TABLE TranIsolLevels (
Id INTEGER PRIMARY KEY NOT NULL,
TestValue INTEGER NOT NULL
);

INSERT INTO TranIsolLevels VALUES(1,1);
SELECT * FROM TranIsolLevels;

BEGIN;
UPDATE TranIsolLevels
SET TestValue=10
WHERE Id=1;
SELECT pg_sleep(10);
ROLLBACK;

SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
BEGIN;
SELECT * FROM TranIsolLevels;
SELECT pg_sleep(10);
COMMIT;