A)-- create procedure to get order by id
Create procedure [dbo].[GetOrderByID] 
 @GetOrderByID INT

As 
BEGIN TRY
SELECT [o].[OrderID]
      ,[o].[CustomerID]
      ,[o].[EmployeeID]
      ,[o].[OrderDate]
      ,[o].[RequiredDate]
      ,[o].[ShippedDate]
      ,[o].[ShipVia]
      ,[o].[Freight]
      ,[o].[ShipName]
      ,[o].[ShipAddress]
      ,[o].[ShipCity]
      ,[o].[ShipRegion]
      ,[o].[ShipPostalCode]
      ,[o].[ShipCountry]FROM [dbo].[Orders] [o]
WHERE [o].[OrderID] = @GetOrderByID;

SELECT [od].[OrderID]
      ,[od].[ProductID]
      ,[od].[UnitPrice]
      ,[od].[Quantity]
      ,[od].[Discount] FROM [dbo].[Order Details] [od]
WHERE [od].[OrderID] = @GetOrderByID;
END TRY
BEGIN CATCH
ROLLBACK;
END CATCH

--test of @GetOrderByID
EXECUTE [dbo].[GetOrderByID] @GetOrderByID = '10450'

Б) Create procedure [dbo].[DeleteOrderById] 
 @DeleteOrderById INT

As 
BEGIN TRY
DELETE FROM [dbo].[Order Details]
WHERE [dbo].[Order Details].[OrderID] = @DeleteOrderById;

DELETE FROM [dbo].[Orders]
WHERE [dbo].[Orders].[OrderID] = @DeleteOrderById;



END TRY
BEGIN CATCH
BEGIN TRANSACTION;
ROLLBACK;
END CATCH;
-- test of @DeleteOrderById
EXECUTE [dbo].[DeleteOrderById] @DeleteOrderById = '10450'
-- now order 10450 EXTERMINATEED! we can see it with 
EXECUTE [dbo].[GetOrderByID] @GetOrderByID = '10450'


В) -- create custom type
CREATE TYPE [dbo].[Type_CreateOrder] 
 AS TABLE (
 [ProductID] int
 ,[UnitPrice] money
 ,[Quantity] smallint	
 ,[Discount] real
)

--create PROCEDURE
CREATE PROCEDURE [dbo].[CreateOrder]
@ListOfOrderDetails AS [dbo].[Type_CreateOrder] READONLY,
@CreateOrder_OrderID nchar(20),
@CreateOrder_CustomerID nchar(20),
@CreateOrder_EmployeeID int,
@CreateOrder_OrderDate datetime,
@CreateOrder_RequiredDate datetime,
@CreateOrder_ShippedDate datetime,
@CreateOrder_ShipVia int,
@CreateOrder_Freight money,
@CreateOrder_ShipName nvarchar(200),
@CreateOrder_ShipAddress nvarchar(300),
@CreateOrder_ShipCity nvarchar(50),
@CreateOrder_ShipRegion nvarchar(70),
@CreateOrder_ShipPostalCode nvarchar(15),
@CreateOrder_ShipCountry nvarchar(70)
As 
BEGIN TRY
INSERT INTO [dbo].[Orders](
	[OrderID]
      ,[CustomerID]
      ,[EmployeeID]
      ,[OrderDate]
      ,[RequiredDate]
      ,[ShippedDate]
      ,[ShipVia]
      ,[Freight]
      ,[ShipName]
      ,[ShipAddress]
      ,[ShipCity]
      ,[ShipRegion]
      ,[ShipPostalCode]
      ,[ShipCountry])
	VALUES(
			@CreateOrder_OrderID,
			@CreateOrder_CustomerID ,
			@CreateOrder_EmployeeID ,
			@CreateOrder_OrderDate ,
			@CreateOrder_RequiredDate ,
			@CreateOrder_ShippedDate ,
			@CreateOrder_ShipVia ,
			@CreateOrder_Freight ,
			@CreateOrder_ShipName ,
			@CreateOrder_ShipAddress,
			@CreateOrder_ShipCity ,
			@CreateOrder_ShipRegion ,
			@CreateOrder_ShipPostalCode ,
			@CreateOrder_ShipCountry );
	INSERT INTO [dbo].[Order Details](
					  [OrderID]
					 ,[ProductID] 
					 ,[UnitPrice] 
					 ,[Quantity] 	
					 ,[Discount])

	SELECT @@IDENTITY
	,[ProductID]
	,[UnitPrice] 
	,[Quantity] 	
	,[Discount]
	FROM @ListOfOrderDetails;
	
END TRY
BEGIN CATCH
ROLLBACK;
END CATCH



 
 Г) --edite order 
 CREATE TYPE [dbo].[Type_EditOrder] 
 AS TABLE (
 [ProductID] int
 ,[UnitPrice] money
 ,[Quantity] smallint	
 ,[Discount] real
);


CREATE PROCEDURE [dbo].[EditOrder]
@ListOfOrderDetails AS [dbo].[Type_EditOrder] READONLY,
@EditOrder_OrderID int,
@EditOrder_CustomerID nchar(20),
@EditOrder_EmployeeID int,
@EditOrder_OrderDate datetime,
@EditOrder_RequiredDate datetime,
@EditOrder_ShippedDate datetime ,
@EditOrder_ShipVia int,
@EditOrder_Freight money,
@EditOrder_ShipName nvarchar(200),
@EditOrder_ShipAddress nvarchar(300),
@EditOrder_ShipCity nvarchar(50),
@EditOrder_ShipRegion nvarchar(70),
@EditOrder_ShipPostalCode nvarchar(15),
@EditOrder_ShipCountry nvarchar(70)
As 
BEGIN TRY
UPDATE  [dbo].[Orders]
	SET	
      [CustomerID] = @EditOrder_CustomerID
      ,[EmployeeID] = @EditOrder_EmployeeID 
      ,[OrderDate] = @EditOrder_OrderDate
      ,[RequiredDate] =  @EditOrder_RequiredDate
      ,[ShippedDate] = @EditOrder_ShippedDate
      ,[ShipVia] = @EditOrder_ShipVia 
      ,[Freight] = @EditOrder_Freight
      ,[ShipName] = @EditOrder_ShipName
      ,[ShipAddress] = @EditOrder_ShipAddress
      ,[ShipCity] = @EditOrder_ShipCity
      ,[ShipRegion] = @EditOrder_ShipRegion 
      ,[ShipPostalCode] = @EditOrder_ShipPostalCode
      ,[ShipCountry] = @EditOrder_ShipCountry
	  WHERE [OrderID] = @EditOrder_OrderID ;
	
	DELETE FROM [dbo].[Order Details] 
	WHERE [OrderID] = @EditOrder_OrderID;

	INSERT INTO [dbo].[Order Details](
					  [OrderID]
					 ,[ProductID] 
					 ,[UnitPrice] 
					 ,[Quantity] 	
					 ,[Discount])

	SELECT @@IDENTITY
	,[ProductID]
	,[UnitPrice] 
	,[Quantity] 	
	,[Discount]
	FROM @ListOfOrderDetails;
	
END TRY
BEGIN CATCH
ROLLBACK;
END CATCH